<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prompt Engineering & Multimodal RAG — Team Playbook</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        :root {
            --bg-color: #020617;
            --card-color: rgba(15, 23, 42, 0.6);
            --border-color: rgba(30, 41, 59, 0.8);
            --text-color: #94a3b8;
            --title-color: #ffffff;
            --highlight-color: #38bdf8;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            background-image: radial-gradient(circle at top right, rgba(29, 78, 216, 0.3), transparent 40%),
                              radial-gradient(circle at bottom left, rgba(109, 40, 217, 0.2), transparent 50%);
        }
        .nav-link {
            @apply px-3 py-2 rounded-md text-sm font-medium text-slate-400 hover:text-white hover:bg-slate-800/60 transition-all duration-200;
        }
        .nav-link.active {
            @apply bg-blue-600/20 text-blue-300 font-semibold;
        }
        .section-title {
            @apply text-3xl font-extrabold tracking-tight text-white sm:text-4xl;
        }
        .section-subtitle {
            @apply mt-3 text-lg leading-8 text-slate-400;
        }
        .card {
            background-color: var(--card-color);
            @apply border border-slate-800/80 rounded-xl shadow-lg backdrop-blur-sm transition-all duration-300;
        }
        .card:hover {
            @apply transform scale-[1.02] shadow-blue-500/10 border-slate-700;
        }
        .prose { color: var(--text-color); }
        .prose h1, .prose h2, .prose h3, .prose h4, .prose h5, .prose h6 { color: var(--title-color); }
        .prose strong { color: #e2e8f0; }
        .prose code {
            color: #f87171; /* red-400 */
            background-color: #1e293b; /* slate-800 */
            padding: 0.1em 0.3em;
            border-radius: 4px;
        }
        .prose pre {
            background-color: #0f172a; /* slate-900 */
            border: 1px solid #1e293b; /* slate-800 */
            padding: 1rem;
            border-radius: 0.5rem;
            color: #e2e8f0; /* slate-200 */
        }
        .prose ul > li::before { background-color: #64748b; }
        .checklist li {
            @apply flex items-start;
        }
        .checklist li::before {
            content: '✓';
            @apply mr-3 mt-1 flex-shrink-0 text-blue-400;
        }
        .mermaid-diagram {
            @apply bg-slate-900/80 border border-slate-800 rounded-lg p-4 flex justify-center items-center;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Data Store -->
    <script id="playbook-data" type="application/json">
    {
        "purpose": {
            "why": "Give the team a clear, maintainable way to design prompts and Retrieval-Augmented Generation (RAG) for text and multimodal (images, slides, audio, video) use cases.",
            "who": "Executives (value & risk), product (requirements & scope), engineers/researchers (patterns & checklists), and operations (quality & monitoring).",
            "outcomes": [
                "Consistent prompt specs the whole org can read.",
                "Standard RAG designs that are adaptable to multimodal content.",
                "Shared language for evaluation, performance, safety, and governance."
            ]
        },
        "sitemap": [
            { "id": "home", "name": "Home" },
            { "id": "prompt_engineering", "name": "Prompt Engineering" },
            { "id": "rag_foundations", "name": "RAG Foundations" },
            { "id": "multimodal_rag", "name": "Multimodal RAG" },
            { "id": "agents_tools", "name": "Agents & Tools" },
            { "id": "evals_monitoring", "name": "Evals & Monitoring" },
            { "id": "performance_cost", "name": "Performance & Cost" },
            { "id": "safety_governance", "name": "Safety & Governance" },
            { "id": "patterns_cookbook", "name": "Patterns Cookbook" },
            { "id": "playgrounds", "name": "Playgrounds (Examples)" },
            { "id": "templates_checklists", "name": "Templates & Checklists" },
            { "id": "glossary_faq", "name": "Glossary & FAQ" },
            { "id": "use_case_analyst", "name": "Use Case: Earnings Analyst" }
        ],
        "home": {
            "audio_src": "https://raw.githubusercontent.com/santho1031/GenAIRAGPrompt/main/data/audio/Adaptive%20GenAI%20Systems.mp3",
            "diagram_spec": "graph TD\n    User --> A[Prompt Engineering]\n    A --> B{Retrieval}\n    A --> C{Tools}\n    B --> A\n    C --> A\n    A --> D[Guardrails]\n    D --> E[Answer + Citations]\n    E --> F(Evals & Monitoring)\n    F --> A\n\n    style User fill:#2563eb,stroke:#fff,stroke-width:2px\n    style E fill:#16a34a,stroke:#fff,stroke-width:2px"
        },
        "prompt_engineering": {
            "principles": [
                "**Clear task definition.** One sentence outcome.",
                "**Persona & guardrails.** Who is speaking; what must/ mustn’t happen.",
                "**Relevant context only.** Background, constraints, examples, scope limits.",
                "**Structured formats.** Lists, sections, or named fields.",
                "**Explicit output rules.** Structure, word/step limits, tone, and formatting."
            ],
            "spec_template": "Title:\nOwner:\nTask (one sentence):\nAudience & Persona:\nBackground/Context:\nConstraints/Assumptions:\nInputs:\nInstructions (ordered):\nOutput Format (fields & rules):\nExamples (2–3 pairs):\nSafety Rules (must/never):\nAcceptance Criteria (what “good” means):\nLinked Evals (golden sets / checks):\nVersion & Changelog:",
            "patterns": [
                {"name": "Constrained Bullets", "use": "exec summaries."},
                {"name": "Schema-like Output", "use": "consistent extraction."},
                {"name": "Critique-Then-Revise", "use": "self-review for quality."},
                {"name": "Chain-of-Checks", "use": "validations before final."},
                {"name": "Router Prompt", "use": "classify then hand off to a specialist prompt."}
            ],
            "anti_patterns": "Vague asks, hidden requirements, overlong context, “do-everything” prompts.",
            "prompt_ops": "Naming & ownership, change notes, test gates, versioning tied to product releases.",
            "example": {
                "vague": "Explain check-in at a luxury resort.",
                "optimized": "Explain check-in at a luxury resort as six numbered steps, ≤15 words per step, polite tone."
            }
        },
        "rag_foundations": {
            "diagram_spec": "graph LR\n    A[Ingestion] --> B[Indexing]\n    B --> C[Retrieval]\n    C --> D[Reranking]\n    D --> E[Generation]\n    E --> F[Post-processing]\n    F --> G[Citations]\n\n    subgraph Knowledge Base\n        A\n        B\n    end\n    subgraph Query Time\n        C\n        D\n        E\n        F\n        G\n    end"
        },
        "multimodal_rag": {
            "diagram_spec": "graph TD\n    subgraph Sources\n        A[Images/Charts]\n        B[Slides/PDFs]\n        C[Audio/Video]\n    end\n    subgraph Ingestion Pipelines\n        A --> A1[OCR]\n        A1 --> A2[Caption]\n        A2 --> A3[Keywords]\n        B --> B1[Titles & Notes]\n        B1 --> B2[Figure Captions]\n        B2 --> B3[Table Summaries]\n        C --> C1[Timestamped Transcript]\n        C1 --> C2[Speaker Labels]\n        C2 --> C3[Scene/Chapters]\n    end\n    subgraph Unified Search\n        D((Searchable Knowledge))\n    end\n    A3 --> D\n    B3 --> D\n    C3 --> D"
        },
        "agents_tools": {
            "concepts": [
                "**Function Calling:** The core mechanism allowing LLMs to execute bounded, predictable actions through code.",
                "**Decision Logic:** The agent must decide *when* to use a tool, *which* tool to use, and with *what* arguments.",
                "**Execution Order:** Critical design choice: retrieve first then use a tool (e.g., calculator on retrieved numbers), or use a tool first (e.g., get current stock price) then retrieve related news.",
                "**Guardrails:** Agents must operate within strict boundaries. A `delete_file` tool is dangerous; a `read_file_line` tool is safer.",
                "**Error Handling:** Robust agents need built-in logic for timeouts, retries, and fallbacks when tools fail or return unexpected results."
            ]
        },
        "safety_governance": {
            "risks": [
                {"name": "Prompt Injection", "mitigation": "Sanitize inputs, use delimiters, and have a separate, privileged system prompt that can't be easily overridden by user context."},
                {"name": "Data Exfiltration", "mitigation": "Implement strict output parsing and redaction. Never let the LLM return raw tool outputs directly to the user."},
                {"name": "Retrieval Poisoning", "mitigation": "Vet data sources. Maintain provenance records for all indexed content. Use allowlists for trusted domains."},
                {"name": "Unsafe Content Generation", "mitigation": "Apply safety classifiers to both inputs and outputs. Use constitutional AI principles to define strict behavioral guardrails."}
            ],
            "governance": [
                "**Audit Trails:** Log every prompt, retrieved document set, tool call, and final output for traceability.",
                "**Tenant Scoping:** In multi-tenant systems, ensure retrieval and tool use are strictly confined to the user's authorized data scope.",
                "**Retention & Deletion:** Implement and enforce data retention policies for logs and indexed content to comply with privacy regulations."
            ]
        },
        "playgrounds": {
            "title": "Read-Only Playgrounds",
            "subtitle": "Illustrative examples showing key concepts in action. These are static snapshots, not live demos.",
            "examples": [
                {
                    "title": "RAG Walkthrough: From Question to Answer",
                    "description": "See how a question is broken down, how snippets are retrieved, and how they are synthesized into a final, cited answer.",
                    "steps": [
                        "<strong>User Question:</strong> \"What was our Q2 operating margin and what drove it?\"",
                        "<strong>Retrieval:</strong> Fetches snippets from a 10-Q ('operating margin was 14.2%') and an earnings call transcript ('...driven by enterprise renewals...').",
                        "<strong>Synthesis:</strong> Combines the snippets into a coherent answer.",
                        "<strong>Final Answer:</strong> \"Our Q2 operating margin was 14.2% [10-Q, p.5], primarily driven by strong enterprise renewals [Earnings Call, 00:12:58].\""
                    ]
                },
                {
                    "title": "Reranking: Before & After",
                    "description": "Demonstrates how a reranking step improves the quality of retrieved context before it reaches the LLM.",
                    "steps": [
                        "<strong>Initial Retrieval (Top 3):</strong><br>1. [Irrelevant] A generic definition of 'operating margin'.<br>2. [Relevant] '...operating margin was 14.2%...'<br>3. [Vaguely Relevant] A press release mentioning a new product.",
                        "<strong>After Reranking (Top 3):</strong><br>1. [Relevant] '...operating margin was 14.2%...'<br>2. [Relevant] A slide title: 'Q2 Margin Performance'.<br>3. [Irrelevant] A generic definition of 'operating margin'."
                    ]
                }
            ]
        },
        "use_case_analyst": {
            "scenario": "Product managers and finance leads ask, “How did we perform this quarter compared to last?” They want a concise answer that references slides, filings, and specific timecodes from the earnings call video.",
            "diagram_spec": "graph TD\n    A[User Question] --> B(1. Query Normalizer)\n    B --> C(2. Retrieval Query Builder)\n    C --> D{Retrieve Snippets}\n    D --> E(3. Evidence Assembler)\n    subgraph Conditional Steps\n        E --> F(4. Vision QA for Charts)\n    end\n    E --> G(5. Synthesizer)\n    F --> G\n    G --> H(6. Safety & Policy Check)\n    H --> I[Final Answer + Citations]\n\n    style I fill:#16a34a,stroke:#fff,stroke-width:2px"
        }
    }
    </script>

    <div class="flex min-h-screen">
        <!-- Sidebar Navigation -->
        <nav class="w-64 bg-slate-900/70 backdrop-blur-sm border-r border-slate-800 fixed top-0 left-0 h-full pt-8 z-20 overflow-y-auto">
            <div class="px-6">
                <h2 class="text-lg font-bold text-white">Prompt & RAG Playbook</h2>
                <p class="text-xs text-slate-400">Enhanced Edition</p>
            </div>
            <div class="mt-8 space-y-1 px-4" id="navigation">
                <!-- Links will be injected by JS -->
            </div>
        </nav>

        <!-- Main Content -->
        <main class="flex-1 ml-64">
            <div id="page-content" class="p-8 lg:p-12 prose max-w-none">
                <!-- Page content will be injected by JS -->
            </div>
        </main>
    </div>

    <script>
        // --- MERMAID INITIALIZATION ---
        mermaid.initialize({
            startOnLoad: false,
            theme: 'base',
            themeVariables: {
                background: '#0f172a',
                primaryColor: '#1e293b',
                primaryTextColor: '#e2e8f0',
                lineColor: '#475569',
                secondaryColor: '#334155',
                tertiaryColor: '#1e293b'
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            const data = JSON.parse(document.getElementById('playbook-data').textContent);
            const sitemap = JSON.parse(document.getElementById('playbook-data').textContent).sitemap;
            const navigation = document.getElementById('navigation');
            const pageContent = document.getElementById('page-content');

            function navigate(pageId) {
                window.location.hash = pageId;
                renderPage(pageId);
                window.scrollTo(0, 0);
            }

            async function renderPage(pageId) {
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.toggle('active', link.getAttribute('href') === `#${pageId}`);
                });
                
                let html = '';
                // This is a simplified router. A real app would use a more robust solution.
                const pageRenderers = {
                    'home': renderHomePage,
                    'prompt_engineering': renderPromptEngineeringPage,
                    'rag_foundations': renderRagFoundationsPage,
                    'multimodal_rag': renderMultimodalRagPage,
                    'agents_tools': renderAgentsToolsPage,
                    'evals_monitoring': () => "<h2>Evals & Monitoring</h2><p>Content from previous version.</p>", // Placeholder
                    'performance_cost': () => "<h2>Performance & Cost</h2><p>Content from previous version.</p>", // Placeholder
                    'safety_governance': renderSafetyGovernancePage,
                    'patterns_cookbook': () => "<h2>Patterns Cookbook</h2><p>Content from previous version.</p>", // Placeholder
                    'playgrounds': renderPlaygroundsPage,
                    'templates_checklists': () => "<h2>Templates & Checklists</h2><p>Content from previous version.</p>", // Placeholder
                    'glossary_faq': () => "<h2>Glossary & FAQ</h2><p>Content from previous version.</p>", // Placeholder
                    'use_case_analyst': renderUseCasePage
                };

                const renderer = pageRenderers[pageId];
                if (renderer) {
                    html = renderer();
                } else {
                    html = `
                        <h1 class="section-title">${sitemap.find(p => p.id === pageId)?.name || 'Page Not Found'}</h1>
                        <p class="section-subtitle">Content for this section is under construction.</p>
                    `;
                }
                
                pageContent.innerHTML = html;
                await renderMermaidDiagrams();
            }

            async function renderMermaidDiagrams() {
                const diagrams = document.querySelectorAll('.mermaid-diagram-source');
                for (const el of diagrams) {
                    const spec = el.textContent;
                    const { svg } = await mermaid.render(el.id, spec);
                    const container = document.querySelector(`[data-mermaid-id="${el.id}"]`);
                    if (container) {
                        container.innerHTML = svg;
                    }
                }
            }
            
            function createMermaidPlaceholder(id, spec) {
                return `
                    <div class="mermaid-diagram" data-mermaid-id="mermaid-${id}">
                        <div class="text-slate-500">Loading Diagram...</div>
                    </div>
                    <pre id="mermaid-${id}" class="mermaid-diagram-source" style="display:none;">${spec}</pre>
                `;
            }

            function renderAudioPlayer(audioSrc) {
                return `
                    <div class="my-12">
                        <div class="card p-6 md:p-8">
                            <div class="flex flex-col md:flex-row items-center gap-6">
                                <div class="flex-shrink-0">
                                    <div class="w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center shadow-lg">
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-10 h-10 text-white">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 18.75a6 6 0 006-6v-1.5m-6 7.5a6 6 0 01-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 01-3-3V4.5a3 3 0 116 0v8.25a3 3 0 01-3 3z" />
                                        </svg>
                                    </div>
                                </div>
                                <div class="w-full">
                                    <h3 class="text-xl font-bold text-white !mt-0">Audio Overview</h3>
                                    <p class="text-slate-400 mt-1 text-sm">Listen to a 90-second overview of the core concepts behind building adaptive, production-ready GenAI systems.</p>
                                    <audio controls class="w-full mt-4" src="${audioSrc}">
                                        Your browser does not support the audio element.
                                    </audio>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            function renderHomePage() {
                return `
                    <h1 class="section-title">Prompt Engineering & Multimodal RAG Playbook</h1>
                    <p class="section-subtitle">${data.purpose.why}</p>
                    
                    ${renderAudioPlayer(data.home.audio_src)}

                    <h2 class="mt-16">LLM System Anatomy</h2>
                    <p>A modern LLM system is more than a prompt. It's a pipeline where prompts, retrieval, tools, and guardrails work together to produce high-quality, safe, and verifiable results.</p>
                    <div class="mt-8">${createMermaidPlaceholder('home-diagram', data.home.diagram_spec)}</div>
                `;
            }

            function renderPromptEngineeringPage() {
                const d = data.prompt_engineering;
                return `
                    <h1 class="section-title">Prompt Engineering</h1>
                    <p class="section-subtitle">How we write prompts so they are clear, maintainable, and testable.</p>
                    
                    <h2 class="mt-12">Principles</h2>
                    <ul class="checklist">${d.principles.map(p => `<li>${marked.parseInline(p)}</li>`).join('')}</ul>

                    <h2 class="mt-12">Prompt Spec Template</h2>
                    <p>Use this template for every new prompt to ensure consistency and completeness. It serves as the source of truth for product, engineering, and QA.</p>
                    <div class="card mt-6">
                        <div class="bg-slate-800/50 px-4 py-2 border-b border-slate-800 text-sm text-slate-400 flex justify-between items-center">
                            <span>prompt_spec.md</span>
                            <button onclick="copyToClipboard(this)" data-copy-content="${d.spec_template.replace(/"/g, '&quot;')}" class="text-xs hover:text-white transition">Copy</button>
                        </div>
                        <pre class="m-0 p-4 rounded-t-none !bg-slate-900/80"><code>${d.spec_template}</code></pre>
                    </div>
                `;
            }
            
            function renderRagFoundationsPage() {
                 return `
                    <h1 class="section-title">RAG Foundations</h1>
                    <p class="section-subtitle">Thinking about text-first retrieval in a way that's ready for multimodal content.</p>
                    
                    <h2 class="mt-12">Retrieval Pipeline Overview</h2>
                    <p>This is the standard flow for how we ingest information, search it, and use it to generate a grounded answer.</p>
                    <div class="mt-8">${createMermaidPlaceholder('rag-foundations-diagram', data.rag_foundations.diagram_spec)}</div>
                `;
            }
            
            function renderMultimodalRagPage() {
                return `
                    <h1 class="section-title">Multimodal RAG</h1>
                    <p class="section-subtitle">Extending our RAG patterns to handle images, slides, audio, and video.</p>
                    
                    <h2 class="mt-12">Multimodal Ingestion Map</h2>
                    <p>Each modality requires a specialized ingestion process to extract searchable text and metadata, which are then unified for searching.</p>
                    <div class="mt-8">${createMermaidPlaceholder('multimodal-rag-diagram', data.multimodal_rag.diagram_spec)}</div>
                `;
            }

            function renderAgentsToolsPage() {
                const d = data.agents_tools;
                return `
                    <h1 class="section-title">Agents & Tools</h1>
                    <p class="section-subtitle">Moving beyond Q&A to systems that can take action.</p>
                    
                    <h2 class="mt-12">Core Concepts</h2>
                    <p>An "agent" is an LLM-powered system that uses "tools" (functions) to interact with the outside world. This requires careful design around several key concepts.</p>
                    <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                        ${d.concepts.map(c => `
                            <div class="card p-6">
                                <h3 class="!mt-0">${marked.parseInline(c.split(':')[0])}</h3>
                                <p>${c.split(':').slice(1).join(':')}</p>
                            </div>
                        `).join('')}
                    </div>
                `;
            }

            function renderSafetyGovernancePage() {
                const d = data.safety_governance;
                return `
                    <h1 class="section-title">Safety & Governance</h1>
                    <p class="section-subtitle">Mitigating risks and ensuring compliance across our AI systems.</p>

                    <h2 class="mt-12">Common Risks & Mitigations</h2>
                    <div class="mt-6 space-y-4">
                        ${d.risks.map(r => `
                            <div class="card p-4 border-l-4 border-red-500/70">
                                <h4 class="font-semibold text-red-300">${r.name}</h4>
                                <p class="mt-1 text-sm"><strong class="text-slate-300">Mitigation:</strong> ${r.mitigation}</p>
                            </div>
                        `).join('')}
                    </div>
                    
                    <h2 class="mt-12">Governance Policies</h2>
                     <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-6">
                        ${d.governance.map(g => `
                            <div class="card p-6">
                                <h3 class="!mt-0">${g.split(':')[0]}</h3>
                                <p>${g.split(':').slice(1).join(':')}</p>
                            </div>
                        `).join('')}
                    </div>
                `;
            }
            
            function renderPlaygroundsPage() {
                const d = data.playgrounds;
                return `
                    <h1 class="section-title">${d.title}</h1>
                    <p class="section-subtitle">${d.subtitle}</p>
                    
                    <div class="mt-12 space-y-8">
                        ${d.examples.map(ex => `
                            <div class="card p-6">
                                <h3 class="!mt-0">${ex.title}</h3>
                                <p>${ex.description}</p>
                                <div class="mt-4 p-4 bg-slate-950/70 rounded-lg border border-slate-800 space-y-2 text-sm">
                                    ${ex.steps.map(step => `<div>${marked.parseInline(step)}</div>`).join('')}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
            }

            function renderUseCasePage() {
                const d = data.use_case_analyst;
                return `
                    <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl p-8 mb-12 -mx-8 -mt-8 lg:-mx-12 lg:-mt-12">
                        <h1 class="!text-white !mt-0">Use Case: Multimodal RAG — “Earnings Call Analyst”</h1>
                        <p class="text-blue-200 text-lg leading-relaxed">${d.scenario}</p>
                    </div>

                    <h2 class="mt-12">Flow Diagram</h2>
                    <p>This chain of prompts collaborates to turn a user question into a grounded, multi-source answer.</p>
                    <div class="mt-6">${createMermaidPlaceholder('use-case-diagram', d.diagram_spec)}</div>
                `;
            }

            window.copyToClipboard = function(button) {
                const content = button.dataset.copyContent;
                const textarea = document.createElement('textarea');
                textarea.value = content;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                
                const originalText = button.textContent;
                button.textContent = 'Copied!';
                setTimeout(() => {
                    button.textContent = originalText;
                }, 2000);
            }

            // --- Initialization ---
            navigation.innerHTML = sitemap.map(page =>
                `<a href="#${page.id}" class="nav-link block">${page.name}</a>`
            ).join('');

            navigation.addEventListener('click', (e) => {
                if (e.target.tagName === 'A') {
                    e.preventDefault();
                    const pageId = new URL(e.target.href).hash.substring(1);
                    navigate(pageId);
                }
            });
            
            window.addEventListener('hashchange', () => {
                const pageId = window.location.hash.substring(1) || 'home';
                renderPage(pageId);
            });

            const initialPageId = window.location.hash.substring(1) || 'home';
            navigate(initialPageId);
        });
    </script>

</body>
</html>
